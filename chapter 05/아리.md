# HTTP와 연계하는 웹 서버

## 가상호스트

물리적으로 1개인 서버를 마치 여러개인듯 가상으로 구성하는 것

도메인으로 접근하면 DNS가 IP주소로 변환하여 해당 서버에 접근하도록 한다.

→ 같은 IP 주소를 가진 도메인이 여러개라면?  접근 불가! Host 헤더필드에 지정해줘야 올바르게 접근할 수 있다.

## 통신을 중계하는 프로그램 : 프록시 / 게이트웨이 / 터널

## 프록시

: 서버/클라이언트의 역할을 모두 하는 중계 프로그램

- 클라이언트의 리퀘스트를 받아 서버에게 전송하고, 서버의 리스폰스를 클라이언트에게 전달한다.
`클라이언트 ←→ 프록시 서버 ←→ 오리진 서버 ( 리소스 본체를 가진 서버 )`
- 여러개의 프록시 서버를 경유하는 것도 가능! 
  → via 헤더필드에 경유한 호스트 정보를 추가해야한다.
- 캐시를 사용하여 네트워크 대역 등을 효율적으로 사용하기 위해 이용한다.
- 특정 웹사이트의 접근 제한, 접근 로그 획득 정책을 철저하게 지키기 위해 이용한다.

< 사용방법 >

- 캐싱 프록시
    - 프록시 서버 상에 리소스 캐시를 보존해둔다.
    - 따라서 같은 리소스의 리퀘스트가 온 경우 오리진 서버로붙 리소스를 획득하는 것이 아니라 저장해둔 캐시를 되돌려준다! → 통신량과 통신 시간이 줄어든다.
- 투명 프록시
    - 메시지 변경을 하지 않는다.
- 비투과 프록시
    - 메시지 변경이 일어날 수 있다.

< 캐시 > 

- 프록시 서버 혹은 클라이언트의 로컬 디스크에 저장된 리소스의 사본
- 사본이기 때문에 원본이 변경되는 경우 해당 변경 사항을 감지할 수 없다. 
따라서 유효기간 설정을 통해 일정 시간이 지나면 유효성을 확인하고, 변경된 데이터를 획득한다.
- 서버 측 뿐만 아니라 클라이언트 측에서 캐시를 가질 수 있다.
→ 서버에 접근할 필요 없이 로컬디스크로부터 불러온다.

## 게이트웨이

- 다른 서버를 중계하는 서버
- 서로 다른 프로토콜을 사용하는 통신의 경우 두 프로토콜을 적절히 변환해주는 역할을 한다.
→ ex) 데이터베이스에 접속해 SQL 쿼리로 데이터 얻는 경우, 신용카드 결제 시스템과 연결되는 경우
- 마치 서버인 것 처럼 클라이언트의 요청을 수신한다. 따라서 클라이언트는 게이트웨이인지 알지 못할 수 있다.
- 클라이언트와 게이트웨이 사이를 암호화함으로써 통신의 안정성을 높일 수 있다.

## 터널

- 멀리 떨어진 두대의 클라이언트와 서버 사이를 중계하며 접속 주선
- SSL 등의 암호화 통신을 통해 안전하게 통신이 가능하다.
- 특별한 처리 없이 단순히 중계만을 한다.
- 통신하고있는 양쪽 끝의 접속이 끊어질 때 함께 종료된다.

## 프록시 vs 게이트웨이

프록시 : 캐시, 보안, 필터링 등
게이트웨이 : 서로 다른 프로토콜의 호환