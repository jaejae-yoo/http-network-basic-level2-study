# 5장)HTTP와 연계하는 웹 서버

### 가상호스트

- **여러 개의 도메인이 한 서버**를 사용하게 하는 것
- 물리적으로는 서버가 1대이지만, **가상으로 여러 대**가 있는 것 처럼 설정 가능
- 여러 개의 도메인이 있기 때문에, 리퀘스트가 어느 도메인에 대한 것인지 모를 수 있음
따라서, **URI에 호스트명과 도메인 명을 완전히 포함한 URI**를 지정하도록 하거나,
Host 헤더 필드에서 지정해야함

## 통신을 중계하는 프로그램 : 프록시, 게이트웨이, 터널

다른 서버에 리퀘스트를 중계하는 방법

### 프록시

**프록시**

- 클라이언트로부터 받은 **리퀘스트를 다른 서버에 전송**
- 리퀘스트 URI를 변경하지 않음
- 리소스 본체를 가진 Origin Server에서 온 리스폰스를 클라이언트에 돌려줌
- 여러 프록시를 경유할 수 있음. 이 경우에는 **Via 헤더 필드에 경유한 호스트 정보를 추가**해야함
- 캐시를 통한 네트워크 대역의 효율적 사용, 특정 웹 사이트에 대한 액세스 제한, 액세스 로그 획득 정책 보호의 목적

**프록시 사용방법**

캐싱 프록시

- **프록시 서버 상에 `리소스 캐시를 보관`**해 두는 타입의 프록시
- 같은 리소스에 대한 리퀘스트가 왔을 때, 오리진 서버로 중계하는 것이 아닌, `캐싱된 리소스`를 반환

투명 프록시

- 메시지를 변경하는 타입

비투과 프록시

- 메시지를 변경하는 타입

### 게이트웨이

- **HTTP 서버 이외의 서비스를 제공하는 서버와 중계**해주는 역할
- 클라이언트와 게이트웨이 사이를 `암호화`하는 등으로 안전하게 접속함으로써 `통신의 안정성`을 높임

### 터널

- 요구에 따라서 다른 서버와의 `통신 경로`를 확립함
- 클라이언트가 SSL과 같은 `암호화 통신`을 위해 서버와 안전하게 통신하기 위해 사용
- HTTP 리퀘스트를 해석하지 않고 다음 서버에 중계
- 통신하고 있는 양 끝의 접속이 끊어질 때 종료

## 리소스를 보관하는 캐시

### 캐시

- 프록시 서버와 클라이언트의 로컬 디스크에 보관된 리소스의 사본
- 서버에 대한 액세스를 줄일 수 있기 때문에 통신량과 통신 시간을 절약할 수 있음

### 캐시 서버

- 프록시 서버 중 하나로, 리소스를 프록시 서버 상에 보관

### 캐시의 유효기간

오리진 서버의 리소스가 갱신되지만, 캐시의 리소스는 갱신되지 않음

캐시 서버에 캐시가 있어도, 클라이언트의 요구나 캐시의 유효 기간 등에 의해서 오리진 서버에 리소스의 유효성을 확인하거나 새로운 리소스를 다시 획득하러 가게 되는 경우가 있음

### 클라이언트의 캐시

클라이언트도 리소스를 인터넷 상에 보관함(인터넷 임시 파일)

클라이언트 캐시도 서버 캐시와 같은 이유로 유효 기간을 가짐