# 8장. 누가 엑세스하고 있는지를 확인하는 인증

## HTTP에서 사용하는 인증 방법

### 1) BASIC 인증
- 웹 서버와 대응하고 있는 클라이언트 사이에서 이루어지는 인증 방식
- 인증 수순
    - BASIC 인증이 필요한 리소스에 리퀘스트가 있을 경우, 상태 코드 401과 함께 인증 방식과 Request-URI의 보호 공간을 식별하기 위한 문자열을 Authenticate 헤더 필드에 포함해서 응답을 반환합니다.
    - 401을 받은 클라이언트는 유저 id와 password를 Base64 형식으로 인코딩하여, Authorization 헤더 필드에 포함해서 요청을 보냅니다.
    - Authorization 헤더 필드를 포함한 요청을 수신한 서버는 인증 정보가 정확한지 판단합니다.
- Base64는 암호화가 아니기 때문에, 보안이 좋은 편은 아니다.

### 2) DIGEST 인증
- 챌린지 리스폰스 방식(최초에 상대방에게 인증 요구를 보내고 상대방 측에서 받은 챌린지 코드를 사용해서 리스폰스 코드를 계산. 이 값을 상대방에게 송신하여 인증하는 방식.)
- 인증 수순
    - 인증이 필요한 리소스에 리퀘스트가 있을 경우에는 401과 챌린지 코드를 WWW-Authenticate 헤더 필드에 포함해서 응답을 반환합니다.
    - 401을 받은 클라이언트는 필요한 정보를 Authorization 헤더 필드에 포함해서 요청을 보냅니다.
        - 여기서 "username", "realm", "nonce", "uri", "response"가 Authorization 헤더에 반드시 포함돼야 한다. 
    - Authorization 헤더 필드를 포함한 요청을 수신한 서버는 인증 정보가 정확한지 판단합니다.

### 3) SSL 클라이언트 인증
- 클라이언트에 클라이언트 인증서를 사전에 배포하고 install해야 한다.
- 인증 수순
    - 서버는 인증서를 요구하는 “Certificate Request”라는 메시지를 송신한다.
    - 유저는 송신하는 클라이언트 증명서를 선택하고, 클라이언트는 “Client Certificate”라는 메시지를 송신한다.
    - 서버는 클라이언트 증명서를 검증하고, 맞다면 클라이언트의 공개키를 취득한다. 

### 4) 폼 베이스 인증
- 클라이언트가 서버 상의 웹 애플리케이션 자격 정보를 송신하여 그 자격 정보의 검증 결과에 따라 인증하는 방식
- 대부분의 경우 사전에 등록해 둔 자격 정보인 유저ID(이메일)과 비밀번호를 입력해서 이를 웹 애플리케이션에 전송하고 검증 결과를 토대로 성공 여부를 결정한다.

### 4.1) 세션 관리와 쿠키
- HTTP는 stateless 프로토콜이기 때문에, 방금 전에 인증을 성공했더라도 이를 유지할 수 없다. 따라서 세션과 쿠키를 사용해서 상태 관리 기능을 할 수 있다.
- 인증 수순
    - 클라이언트가 서버에 유저 ID와 비밀번호 등의 자격 정보가 포함된 요청을 보냅니다.
    - 서버 측은 유저를 식별하기 위해 세션 ID를 발행한다.
    - 클라이언트 측은 서버에게 받은 세션 ID를 쿠키로 저장한다. 다음 요청을 보낼 때 세션 ID를 서버에 함께 보낸다.

- - -
## REFERENCES
우에노 센, 그림으로 배우는 HTTP & Network Basic, 2015