# 8장누가 엑세스하고 있는지를 확인하는 인증

## 8.1 인증이란

### HTTP에서 사용하는 인증 방법

- BASIC 인증
- DIGEST 인증
- SSL 클라이언트 인증
- 폼 베이스 인증

## 8.2 BASIC 인증

- BASIC 인증은 웹 서버와 대응하고 있는 클라이언트 사이에서 이뤄지는 인증 방식

### 인증 수순

1. BASIC 인증이 필요한 리소스에 리퀘스트를 보내면 서버는 401 Unauthorization과 함께 인증 방식(BASIC)과 Request-URI의 보호 공간을 식별하기 위한 문자열을 WWW-Authenticate 헤더 필드에 포함해서 리스폰스를 반환
    
    ```
    HTTP/1.1 401 Unauthorization
    WWW-Authenticate: Basic realm="Input your ID and Password"
    ```
    
2. ID와 Password를 “:”으로 연결한 문장을 Base64라 불리는 형식으로 인코드하고 Authorization 헤더 필드에 포함해서 리퀘스트를 송신.
3. Authorization 헤더 필드를 포함한 리퀘스트를 수신한 서버는 인증 정보를 확인 후 정확하면 리스폰스를 반환

**단점**

- BASIC 인증에서는 Base64 인코딩 형식을 사용하고 있지만 암호화는 아니다. 때문에 도청된 경우 ID와 password를 빼앗길 수도 있다.
- 한 번 BASIC 인증을 하면 일반 브라우저에서 로그아웃할 수 없다. 그래서 보안 등급에 미치지 못해 그다지 사용되지 않는다.

## 8.3 DIGEST 인증

- 챌린지 리스폰스 방식이 사용되어 패스워드를 있는 그대로 직접 보내는 일이 없다.
- 챌린지 리스폰스 방식은 상대방에게 인증 요구를 보내고 상대방 측에서 받은 챌린지 코드를 사용해서 리스폰스 코드를 계산한다. 이 값을 상대에게 송신하여 인증을 하는 방법이다.

### 인증 수순

1. 인증이 필요한 리소스에 접근할 경우 서버는 401과 함께 WWW-Authenticate 헤더 필드에 챌린지 코드를 포함하여 반환한다.
2. 클라이언트는 DIGEST 인증을 위해 필요한 정보를 AUTHORIZATION 헤더 필드에 포함해서 리스폰스를 반환한다.
3. 서버는 인증 정보를 판단하고 리스폰스를 반환한다.
- BASIC에 비해서 보안 등급이 높지만 HTTPS에 비하면 낮다.
- 도청 방지는 제공하지만 위장을 방지하지는 않는다.
- 때문에 그다지 사용되지 않는다.

## 8.4 SSL 클라이언트 인증

- ID와 패스워드가 도난 되었을 때 제 3자가 위장을하는 경우가 있다. 이를 방지하기 위해 SSL 클라이언트 인증이 사용된다.
- HTTPS의 클라이언트 인증서를 이용한 인증 방식

### 인증 수순

- SSL 인증을 위해서 사전에 클라이언트 증명서를 배포하고 인스톨 해둘 필요가 있다.
1. 인증이 필요한 리소스의 리퀘스트가 있었을 경우에는 서버는 클라이언트에게 클라이언트 증명서를 요구하는 “Certificate Request”라는 메시지를 송신한다.
2. 유저는 송신하는 클라이언트 증명서를 선택하고 “Client Certificate”라는 메시지를 송신한다.
3. 서버는 증명서를 검증하여 정확하다면 클라이언트의 공개키를 취득한다. 그 이후에 HTTPS에 의한 암호를 개시한다.

### 2-factor 인증

- SSL 인증은 폼 베이스 인증과 합쳐 2-factor 인증의 하나로서 이용된다.
- 2-factor 인증이란 이용자가 가진 다른 정보와 패스워드를 병용해서 인증하는 방식이다.
- 즉 SSL 클라이언트 인증을 사용해서 클라이언트의 컴퓨터를 인증하고 다른 인증 정보로서 패스워드를 사용하여 유저의 본인 확인을 한다.

## 8.5 폼 베이스 인증

- 폼 베이스 인증은 HTTP 프로토콜의 사양으로 정의된 인증 방식은 아니다.
- 서버 상의 웹 애플리케이션에 자격 정보를 송신하여 자격 정보에 따라 인증하는 방식이다.
- 이는 웹 애플리케이션에 따라 인증 방법이 다양하다.
- 대부분의 경우 유저ID와 패스워드를 사용

### 인증의 대부분은 폼 베이스 인증

- BASIC과 DIGEST 인증은 사용과 보안 문제로 거의 사용되지 않고 SSL은 도입 비용이나 운용 문제로 널리 사용되지 않는다.
- 웹 애플리케이션에서 제각각 구현하는 폼 베이스 인증을 채용

### 세션 관리와 쿠키에 의한 구현

- 폼 베이스 인증은 일반적으로 세션 관리를 위해 쿠키를 사용한다.
- HTTP 프로토콜은 스테이트리스이기 때문에 상태 관리를 위해 세션과 쿠키를 사용
