# 6장) HTTP 헤더

### 메시지 헤더

- 클라이언트나 서버가 response 혹은 request를 처리하기 위한 중요한 정보가 들어있는 곳
- 메시지 바디의 크기나 사용하고 있는 언어, 인증 정보 등을 브라우저나 서버에 제공하기 위함
- 헤더 필드 명 : 필드값 (ex: Content-type: text/html)

### HTTP 헤더 필드의 종류

**일반적 헤더 필드(General Header Fields)**

리퀘스트 메시지와 리스폰스 메시지 둘다 사용되는 헤더

**리퀘스트 헤더 필드(Request Header Fields)**

클라이언트 측에서 서버 측으로 송신된 리퀘스트 메시지에 사용되는 헤더로, 리퀘스트의 부가적 정보와 클라이언트의 정보, 리스폰스 콘텐츠에 관한 우선 순위 등을 부가

**리스폰스 헤더 필드(Response Header Fields)**

서버 측에서 클라이언트 측으로 송신한 리스폰스 메시지에 사용되는 헤더로, 리스폰스의 정보와 서버의 정보, 클라이언트의 추가 정보 요구 등을 부가

**엔티티 헤더 필드(Entity Header Fields)**

리퀘스트 메시지와 리스폰스 메시지에 포함된 엔티티에 사용되는 헤더로 콘텐츠 갱신 시간 등의 엔티티에 관한 정보를 부가

### End-to-end 헤더와 Hop-by-hop 헤더

HTTP 헤더 필드는 캐시와 비캐시 프록시의 동작을 정의하기 위해서 두 가지 카테고리로 분류됨

**End-to-end 헤더**

이 카테고라에 분류된 헤더는 리퀘스트나 리스폰스의 최종 수신자에게 전송됨.
캐시에서 구축된 리스폰스 중 보존되야 하고, 다시 전송되지 않으면 안 되도록 되어 있음.

**Hop-by-gop 헤더**

한 번 전송에 대해서만 유효하고, 캐시와 프록시에 의해서 전송되지 않는 것도 있음.
HTTP/1.1과 그 이후에서 사용되는 Hop-by-hop 헤더는 Connection 헤더 필드에 열거해야함.

아래 8개의 헤더 필드 이외에는 모두 End-by-end

- Connection
- Keep-Alive
- Proxy-Authenticate
- Proxy-Authorization
- Trailer
- TE
- Transfer-Encoding
- Upgrade

## HTTP/1.1 일반 헤더 필드

리퀘스트 메시지와 리스폰스 메시지 양쪽에서 사용되는 헤더

## 리퀘스트 헤더 필드

클라이언트 측에서 서버 측으로 송신된 리퀘스트 메시지에 사용되는 헤더

### Accept

→ 유저 에이전트에서 처리할 수 있는 미디어 타입과 미디어 타입의 상대적인 우선 순위를 전달하기 위함.
ex) text/html, text/plain, image/jpeg
→ 우선 순위는 ;q={0~1범위의 소수점 3자리 수}로 표현하고 1에 가까운 것이 우선 순위가 높음

### Accept-Charset

→ 유저 에이전트에서 처리할 수 있는 문자셋을 나타내고, Accept와 같은 방식으로 우선 순위 지정

### Accept-Encoding

→ 유저 에이전트에서 처리할 수 있는 콘텐트 코딩과 콘텐츠 코딩의 상대적인 우선 순위 전달

### Accept-Language

→ 유저 에이전트가 처리할 수 있는 자연어의 세트와 우선 순위 전달

## 리스폰스 헤더 필드

서버 측으로부터 클라이언트 측으로 송신되는 리스폰스 메시지에 적용된 헤더

### Accept-Ranges

→ 서버가 리소스의 일부분만 지정해서 취득할 수 있는 Range 리퀘스트를 접수할 수 있는지 여부를 전달

### Location(Redirection 유도)

→ 리스폰스 수신자에 대해서 Request-URI 이외의 리소스의 액세스를 윧하는 경우에 사용
기본적으로 3xx: Redirection 리스폰스에 대해서 리다이렉트 처의 URI를 기술

### Retry-After

→ 클라이언트가 일정 시간 후에 리퀘스트를 다시 시행해야 하는지 전달
주로, 503(Service Unavailable)이나 3xx(Redirect)와 함께 사용

## 엔티티 헤더 필드

리퀘스트 메시지와 리스폰스 메시지에 포함된 엔티티에 사용되는 헤더

### Content-Encoding

→ 서버가 엔티티 바디에 대해서 실시한 콘텐츠의 형식을 전달
엔티티의 정보가 누락되지 않도록 압축할 것을 지시

### Content-Language

→ 엔티티 바디에 사용된 자연어를 전달

### Content-Length

→ 엔티티 바디의 크기(단위는 bytes)를 전달
엔티티 바디에 전송 코딩이 실시된 경우에는 해당 헤더 필드를 사용하면 안됨

### Content-Location

→ 메시지 바디에 대응하는 URI를 전달
Location 헤더 필드와 달리, Content-Location은 메시지 바디로 반환된 리소스의 URI를 나타냄

### Content-Range

→ 범위를 지정해서 일부분만을 리퀘스트하는 Range 리퀘스트에 대해서 리스폰스를 할 때에 사용
리스폰스로 보낸 엔티티가 어느 부분에 해당하는가를 전달

### Content-Type

엔티티 바디에 포함되는 오브젝트의 미디어 타입을 전달

### Expires

→ 리소스의 유효 기한 날짜를 전달
캐시 서버가 지정된 날짜까지는 해당 리소스를 요청하는 리퀘스트에 대해 캐싱된 값을 응답하고, 날짜가 지났다면 오리진 서버에 요청

## 쿠키를 위한 헤더 필드

### Set-Cookie

→ 서버가 클라이언트에 대해서 상태 관리를 시작할 때 전달하는 정보

- NAME = VALUE → 쿠키에 부여된 이름과 값
- Expires = DATE → 쿠키 유효 기한
- Path = PATH → 쿠키 적용 대상이 되는 서버 상의 디렉토리
- Domain = 도메인명 → 쿠기 적용 대상이 되는 도메인 명
- Secure → HTTPS로 통신하고 있는 경우에만 쿠키를 송신
- HttpOnly → 쿠키를 js에서 액세스하지 못하도록 제한

### Cookie

→ 클라이언트가 HTTP의 상태 관리 지원을 원할 때 서버로 부터 수신한 쿠키를 이후의 리퀘스트에 포함해서 요청을 보내는 방식