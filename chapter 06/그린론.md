# 6장 HTTP 헤더

## 4종류의 HTTP 헤더 필드
- 일반 헤더 필드
    - 리퀘스트 메시지와 리스폰스 메시지 둘 다 사용되는 헤더이다.
- 리퀘스트 헤더 필드
    - 클라이언트에서 서버 측으로 송신된 리퀘스트 메시지에 사용되는 헤더로 리퀘스트의 부가적 정보와 클라이언트 정보, 리스폰스 콘텐츠에 관란 우선 순위 부가
- 리스폰스 헤더 필드
    - 서버에서 클라이언트 측으로 송신된 리스폰스 메시지에 사용되는 헤더로 리스폰스 정보, 서버 정보등을 부가한다.
- 엔티티 헤더 필드
    - 리퀘스트 메시지와 리스폰스 메시지에 포함된 엔티티에 사용되는 헤더로 콘텐츠 갱신 시간 등의 엔티티에 관한 정보를 부가한다.

## 1) 일반 헤더 필드
리퀘스트 메시지와 리스폰스 메시지 양쪽에서 사용되는 헤더이다. 

- Cache-Control
    - 디렉티브 명령으로 캐싱 동작 지정.
    - 캐시 가능 여부 
        - public 디렉티브
            - 다른 유저에게도 돌려줄 수 있는 캐시 가능
        - private 디렉티브
            - 리스폰스를 특정 유저에만을 대상 캐시. public과 반대
        - no-cache 디렉티브
            - 지정된 헤더 필드만 캐시할 수 없다.
    - 캐시 보존 가능 제어
        - no-score 디렉티브
            - 리퀘스트와 리스폰스에 기밀 정보가 있으므로, 로컬에 보존하면 안된다.
    - 캐시 기한이나 검증을 지정
        - max-age 디렉티브
            - 캐시 서버가 유효성을 재확인하지 않고 리소스를 캐시에 보존해 두는 최대 시간
        - s-maxage 디렉티브
            - max-age와 동일하지만, 여러 유저가 이용 할 수 있는 공유 캐시 서버에만 적용된다. 
        - min-fresh 디렉티브
            - 캐시된 리소스가 지정된 시간은 최신 상태의 것을 반환하도록 캐시 서버에 요구한다.
- Connection
    - 프록시에 더 이상 전송하지 않는 헤더 필드를 지정
    - 지속적 접속 관리
        - 디폴트가 지속적 접속.
        - 접속을 끊고 싶은 경우 Connection 헤더 필드에 Close라고 지정.
- Transfer-Encoding
    - 메시지 바디의 전송 코딩 형식을 지정하는 경우 사용

- Via
    - 클라이언트와 서버 간의 리퀘스트 or 리스폰스 메시지의 경로를 알기 위해 사용. 
    - 프록시 or 게이트웨이가 자신의 서버 정보를 Via 헤더 필드에 추가한 후 메세지 전송. 
    - 메시지 추적과 리퀘스트 루프 회피 등에 사용되므로, 프록시를 경유한다면 반드시 부가해야 한다.

- Warning
    - 리스폰스에 관한 추가 정보 전달. 
    - 기본적으로 캐시에 관한 문제의 경고 유전에게 전달.

## 2) 리퀘스트 헤더 필드
리퀘스트 헤더 필드는 클라이언트 측에서 서버 측으로 송신된 리퀘스트 메시지에 사용되는 헤더로, 리퀘스트의 부가 정보와 클라이언트의 부가 정보와 클라이언트의 정보, 리스폰스의 콘텐츠에 관한 우선 순위 등을 추가한다.

- Accept
    - 유저 에이전트에서 처리할 수 있는 미디어 타입과 미디어 타입의 상대적인 우선 순위를 전달하기 위해 사용.
- Accept-Encoding
    - 유저 에이전트가 처리할 수 있는 콘텐츠 코딩과 콘텐츠 코딩의 상대적인 우선 순위를 전달하기 위해 사용.
    - ex) gzip, compress, deflate, identity

- Accept-Language
    - 유저 에이전트가 처리할 수 있는 자연어 센트와 자연어 세트의 상대적인 우선 순위 전달
- Authorization
    - 유저 에이전트의 인증 정보를 전달하기 위해 사용.
- Expect
    - 서버에 특정 동작 요구를 전달
    - 기대하는 요구에 서버가 요구에 응답하지 못하는 경우 417 Expectation Failed 리스폰스 반환
- Host
    - 리퀘스트한 리소스의 인터넷 호스트와 포트 번호 전달.
    - 호스트 명을 IP 주소로 리퀘스트를 처리하므로 명확하게 해야함(가상 호스트가 1대의 서버에서 복수의 도메인을 할당할 수 있기 때문).
- If-Match
    - 조건부 리퀘스트를 받은 서버는 지정된 조건에 맞는 경우에만 리퀘스트를 받는다.
    - 서버 상의 리소스를 특정하기 위해 ETag 값을 전달.
- If-Modified-Since
    - 필드 값에 지정된 날짜 이후에 갱신된 리소스라면 리퀘스트를 받아들인다.
- Max-Forwards
    - 서버가 다음 서버에 리퀘스트를 전송할 때 1을 뺀 필드 값을 전달. 값이 0이 되면, 전송하지 않고 리스폰스 반환.
    - 0이된 서버까지의 상황을 알 수 있다. 
- Proxy-Authorization
    - 프록시 서버에서의 인증 요구를 받아들일 때, 인증에 필요한 클라이언트의 정보 전달

## 3) 리스폰스 헤더 필드
서버에서 클라이언트로 송신되는 리스폰스 메시지에 적용된 헤더로 리스폰스 부가 정보, 서버의 정보, 클라이언트 부가 정보 요구등을 나타낸다.

- Accept-Ranges
    - 서버의 Range 리퀘스트 접수가능 여부 전달
- Age
    - 얼마나 오래 전 오리진 서버에서 리스폰스가 생성되었는지 전달.
    - 프록시가 리스폰스를 생성한 경우 필수 헤더 필드
- ETag
    - 리소스를 특정하기 위한 문자열 전달
    - 서버는 리소스마다 ETag 값을 할당하며, 리소스가 갱신될 시 Etag 값도 새롭게 할당
    - 강한 Etag: 엔티티가 아주 조금이라도 달라도 값이 변화
    - 약한 Etag: 리소스가 같다는 것을 나타낸다. 리소스 의미에 차이가 있는 경우에만 값이 변화
- Location
    - 3xx: Redirection 리스폰스에 대해서 리다이렉트 처의 URI 기술
- Proxy-Authenticate
    - 프록시 서버에서의 인증 요구를 클라이언트에 전달
- Vary
    - 캐시를 컨트롤하기 위해 사용
    - 오리진 서버가 프록시 서버에 로컬 캐시를 사용하는 방법에 대한 지시 전달
- WWW-Authenticate

## 4) 엔티티 헤더 필드
리퀘스트 메시지와 리스폰스 메시지에 포함된 엔티티에 사용되는 헤더로 콘텐츠의 갱신 시간이 같은 엔티티에 관한 정보를 포함.

- Allow
    - Request-URI에 지정된 리소스가 제공하는 메소드를 목록을 전달
- Content-Encoding
    - 서버가 엔티티 바디에 대해 실시한 콘텐츠 코딩 형식 전달
- Content-Language
    - 엔티티 바디에 사용된 자연어 전달
- Content-Length
    - 엔티티 바디의 크기 전달. 단위는 bytes
- Content-Location
    - 메시지 바디에 대응하는 URI 전달
- Content-Type
    - 엔티티 바디에 포함되는 오브젝트의 미디어 타입 전달
- Expires
    - 리소스의 유효 기한 날짜 전달
- Last-Modified
    - 리소스가 마지막으로 갱신된 날짜 정보 전달

## 5) 쿠키를 위한 헤더 필드
유저 식별과 상태 관리에 사용되고 있다. 
웹 사이트가 유저의 상태를 관리하기 위해 웹 브라우저 경유로 유저의 컴퓨터 상에 일시적으로 데이터를 기록해 두고, 다음에 해당 유저가 웹 사이트에 엑세스 했을 때, 지난 번 발행한 쿠키를 송신받을 수 있다.

- Set-Cookie
    - Set-Cookie 속성을 사용하여 클라이언트에 쿠키를 만들 수 있습니다.
    - 속성
        - Expire
            - 브라우저가 쿠키를 송출할 수 있는 유효 기한
        - Path
            - 쿠키 송출 범위를 특정 디렉토리에 한정
        - Domain
        - Secure
            - HTTPS에서만 경우만 쿠키를 송출 허용
        - HttpOnly
            - 자바스크립트를 경유해서 쿠키를 취득하지 못하도록 하기 위해 사용
            - 크로스 사이트 스크립팅(XSS)로부터 쿠키의 도청을 막는 것이 목적

- - -
## REFERENCES
우에노 센, 그림으로 배우는 HTTP & Network Basic, 2015
